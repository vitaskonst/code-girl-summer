<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="posts">
        <h1>My posts</h1>
        <ul id="list"></ul>
    </div>
    <div id="no-posts" style="display: none;">
        <h1>No posts were found</h1>
        <p>Try to add one <a href="http://localhost:8080/docs" target="_blank" rel="noopener noreferrer">here</a> or from the Postman</p>
    </div>
    <div id="failed-request" style="display: none;">
        <h1 style="color: red">Request Failed</h1>
        <p>Add the following code to the end of your main.py file:</p>
        <pre><code>
@app.middleware("http")
async def cors_middleware(request: Request, call_next):
    response = await call_next(request)
    response.headers['Access-Control-Allow-Origin'] = '*'
    return response
        </code></pre>
        <p>Or try to restart the server</p>
    </div>
    <script>
        function renderPost(post)
        {
            let list = document.getElementById('list')
            
            const listItem = document.createElement("li");
            const postInfo = document.createElement("p");
            postInfo.innerHTML = (post.title);
            listItem.appendChild(link);
            
            list.appendChild(listItem);
        }

        addEventListener("load", async (event) => {
            fetch('http://localhost:8080/posts')
                .then(response => response.json)
                .then(posts => {
                    if (posts.length > 0)
                    {
                        for (let postId in posts) {
                            renderPost(posts[postId]);
                        }
                    }
                    else
                    {
                        document.getElementById('posts').style.display = "none";
                        document.getElementById('no-posts').style.display = "block";
                    }
                })
                .catch(err => {
                    document.getElementById('posts').style.display = "none";
                    document.getElementById('failed-request').style.display = "block";
                })
            
        });
    </script>
</body>
</html>